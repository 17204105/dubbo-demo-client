{"version":3,"sources":["webpack:///./src/App.vue?5e41","webpack:///./src/App.vue","webpack:///./src/store/mutations.js","webpack:///./src/store/mutation-types.js","webpack:///./src/store/actions.js","webpack:///./src/store/getters.js","webpack:///./src/store/index.js","webpack:///./src/router/index.js","webpack:///./src/main.js","webpack:///./src/api/router.js","webpack:///src/views/login/index.vue","webpack:///./src/api/auth.js","webpack:///./src/views/login/index.vue?7bbd","webpack:///./src/views/login/index.vue","webpack:///./src/assets/images/people.png","webpack:///./src/utils/request.js"],"names":["App","render","_h","this","$createElement","_c","_self","staticStyle","height","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","store_mutations","mutations","defineProperty_default","state","data","showLoading","_mutations","breadcrumbItems","actions","setLoading","_ref","commit","setBreadcurmbItems","_ref2","store_getters","vue_esm","use","vuex_esm","store","Store","getters","vue_router_esm","router","routes","path","name","component","login","meta","requiresAuth","redirect","sessionStorage","routers","indexRouter","resolve","e","then","__WEBPACK_AMD_REQUIRE_ARRAY__","bind","catch","oe","children","toConsumableArray_default","JSON","parse","childRouters","_loop","code","routerProps","properties","childRouter","url","routerId","nameFullPath","push","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","get_iterator_default","next","done","value","err","return","generateChildRouters","addRoutes","generateIndexRouter","beforeEach","to","from","token","getItem","query","fullPath","afterEach","breadCrumbItems","title","fullPathSplit","split","forEach","item","index","routerBreadCrumb","length","app","$store","dispatch","src_router","config","productionTip","element_ui_common_default","a","el","template","components","listRouter","search","Object","__WEBPACK_IMPORTED_MODULE_0__utils_request__","method","params","offset","limit","getRouterById","listByParentId","parentId","saveRouter","updateRouter","removeRouter","listAllRouter","includeLocked","computed","extends_default","_this","loginName","password","request","lib_default","stringify","response","userId","username","initIndexRouter","decodeURIComponent","$route","error","views_login","_vm","staticClass","ref","model","loginForm","rules","autoComplete","label-position","_v","src","alt","prop","size","autofocus","placeholder","callback","$$v","$set","expression","slot","type","nativeOn","keyup","$event","_k","keyCode","key","doLogin","loading","click","preventDefault","Component","ssrContext","__webpack_exports__","module","exports","service","create","baseURL","timeout","interceptors","headers","console","log","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_promise___default","reject","errCode","querry","currentRoute"],"mappings":"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","file":"static/js/app.04ecb0356d8f0a2dd96a.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"height\":\"100%\"},attrs:{\"id\":\"app\"}},[_c('transition',[_c('keep-alive',[_c('router-view')],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-454d3d52\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-454d3d52\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","import * as types from './mutation-types'\r\n\r\nconst mutations = {\r\n    [types.SET_LOADING]: (state, data) => {\r\n        state.showLoading = data\r\n    },\r\n    [types.SET_BREADCRUMB_ITEMS]: (state, data) => {\r\n        state.breadcrumbItems = data\r\n    }\r\n}\r\n\r\nexport default mutations\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutations.js","export const SET_LOADING = 'SET_LOADING'\r\nexport const SET_BREADCRUMB_ITEMS = 'SET_BREADCRUMB_ITEMS'\n\n\n// WEBPACK FOOTER //\n// ./src/store/mutation-types.js","import * as types from './mutation-types'\r\n\r\nexport default {\r\n    setLoading({commit}, data) {\r\n        commit(types.SET_LOADING, data)\r\n    },\r\n    setBreadcurmbItems({commit}, data) {\r\n        commit(types.SET_BREADCRUMB_ITEMS, data)\r\n    }\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/store/actions.js","const getters = {\r\n    showLoading: state => state.showLoading,\r\n    breadcrumbItems: state => state.breadcrumbItems\r\n}\r\n\r\nexport default getters\n\n\n// WEBPACK FOOTER //\n// ./src/store/getters.js","import Vue from \"vue\"\r\nimport Vuex from 'vuex'\r\nimport mutations from './mutations'\r\nimport actions from './actions'\r\nimport getters from './getters'\r\n\r\nVue.use(Vuex);\r\n\r\nconst state = {\r\n    showLoading: false,\r\n    breadcrumbItems: []\r\n};\r\n\r\nexport default new Vuex.Store({\r\n    state,\r\n    mutations,\r\n    actions,\r\n    getters\r\n});\n\n\n// WEBPACK FOOTER //\n// ./src/store/index.js","import Vue from 'vue'\nimport Router from 'vue-router'\nimport LoginView from '@/views/login/index'\n\nVue.use(Router)\n\n//按需加载\n/**\n * 有时候我们想把某个路由下的所有组件都打包在同个异步 chunk 中。\n * 只需要 给 chunk 命名，提供 require.ensure 第三个参数作为 chunk 的名称。\n * Webpack 将相同 chunk 下的所有异步模块打包到一个异步块里面，\n * 这也意味着我们无须明确列出 require.ensure 的依赖（传空数组就行）。\n */\n//const Index = resolve => require(['@/views/index'], resolve)\n//const foodList = r => require.ensure([], () => r(require('@/page/foodList')), 'foodList');\n\nconst router = new Router({\n  routes: [\n    {\n      path: '/login',\n      name: \"login\",\n      component: LoginView,\n      meta: { requiresAuth: false }\n    },{\n      path: '/index',\n      redirect: '/',\n      meta: { requiresAuth: true }\n    }\n  ]\n});\ngenerateIndexRouter();\n\n// 验证token，存在才跳转\nrouter.beforeEach((to, from, next) => {\n  let token = sessionStorage.getItem('token')\n  if(to.path === '/') {\n    if(!token) {\n      next({\n\t\t\t\tpath: '/login',\n\t\t\t\tquery: { redirect: to.fullPath }\n      })\n      return\n    }\n  }\n\n\tif(to.meta.requiresAuth) {\n\t\tif(token) {\n\t\t\tnext()\n\t\t} else {\n\t\t\tnext({\n\t\t\t\tpath: '/login',\n\t\t\t\tquery: { redirect: to.fullPath }\n\t\t\t})\n\t\t}\n\t} else {   \n\t\tnext()\n\t}\n});\n\nrouter.afterEach((to, from) => {\n  // 设置面包屑\n  let breadCrumbItems = []\n  let homePageCrumb = {\n    title: '首页',\n    to: '/'\n  }\n  breadCrumbItems.push(homePageCrumb)\n  if(to.meta.nameFullPath) {\n    let fullPathSplit = to.meta.nameFullPath.split('/')\n    fullPathSplit.forEach(( item, index ) => {\n      let routerBreadCrumb = {\n        title: item,\n        to: (index == fullPathSplit.length - 1 ? to.path : '')\n      }\n      breadCrumbItems.push(routerBreadCrumb)\n    });\n  }\n  // 更新到state\n  router.app.$store.dispatch('setBreadcurmbItems', breadCrumbItems)\n})\n\n// 生成首页路由\nfunction generateIndexRouter() {\n  if (!sessionStorage.routers) {\n    return\n  }\n  let indexRouter = {\n    path: '/',\n    name: \"/\",\n    component: resolve => require(['@/views/home/index'], resolve),\n    children: [\n      ...generateChildRouters()\n    ]\n  }\n  router.addRoutes([indexRouter])\n}\n\n// 生成嵌套路由（子路由）\nfunction generateChildRouters() {\n  let routers = JSON.parse(sessionStorage.routers)\n  let childRouters = []\n  for(let router of routers) {\n    if(router.code != null) {\n      let routerProps = JSON.parse(router.properties)\n      let childRouter = {\n        path: router.url,\n        name: router.code,\n        component: resolve => require(['@/views/' + router.code + '/index'], resolve),\n        meta: { routerId: router.id, requiresAuth: routerProps.meta.requiresAuth, nameFullPath: routerProps.nameFullPath }\n      }\n      childRouters.push(childRouter)      \n    }\n  }\n  return childRouters\n}\n\nexport default router;\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport store from './store'\nimport router from './router'\n\nimport ElementUI from 'element-ui'\nimport 'element-ui/lib/theme-chalk/index.css'\n\nVue.config.productionTip = false\n\nVue.use(ElementUI)\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  store,\n  router,\n  template: '<App/>',\n  components: { App }\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import request from '@/utils/request'\r\n\r\nexport const getAuthorizedRouter = () =>\r\n    request({\r\n        url: '/routers/authorized',\r\n        method: 'get'\r\n    })\r\n\r\nexport const listRouter = (search) =>\r\n    request({\r\n        url: '/routers',\r\n        method: 'get',\r\n        params: {\r\n            offset: search.offset,\r\n            limit: search.limit,\r\n            name: search.name\r\n        }\r\n    })\r\n\r\nexport const getRouterById = (id) =>\r\n    request({\r\n        url: '/routers/' + id,\r\n        method: 'get'\r\n    })\r\n\r\nexport const listByParentId = (parentId) =>\r\n    request({\r\n        url: '/routers/search',\r\n        method: 'get',\r\n        params: {\r\n            parentId: parentId\r\n        }\r\n    })\r\n\r\nexport const saveRouter = (router) =>\r\n    request({\r\n        url: '/routers',\r\n        method: 'post',\r\n        data: router\r\n    })\r\n\r\nexport const updateRouter = (id, router) =>\r\n    request({\r\n        url: '/routers/' + id,\r\n        method: 'put',\r\n        data: router\r\n    })\r\n\r\nexport const removeRouter = (id) => \r\n    request({\r\n        url: '/routers/' + id,\r\n        method: 'delete'\r\n    })\r\n\r\nexport const listAllRouter = (includeLocked) =>\r\n    request({\r\n        url: '/routers/all?includeLocked=' + includeLocked,\r\n        method: 'get'\r\n    })\n\n\n// WEBPACK FOOTER //\n// ./src/api/router.js","<template>\r\n  <div class=\"login-container\">\r\n    <el-form class=\"login-form\" :model=\"loginForm\" :rules=\"rules\" ref=\"loginForm\" autoComplete=\"on\" label-position=\"left\">\r\n      <div class=\"login-header\">\r\n        <strong class=\"login-title\">系统登录</strong>\r\n      </div>\r\n      <div class=\"login-body\">\r\n        <img class=\"profile-img\" src=\"../../assets/images/people.png\" alt=\"\">\r\n        <el-form-item prop=\"username\">\r\n          <el-input name=\"username\" size=\"medium\" v-model=\"loginForm.username\" autoComplete=\"on\" autofocus=\"autofocus\" placeholder=\"用户名\">\r\n            <div class=\"login-username\" slot=\"prepend\"></div>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"password\">\r\n          <el-input name=\"password\" type=\"password\" size=\"medium\" v-model=\"loginForm.password\" placeholder=\"口令\" @keyup.enter.native=\"doLogin\">\r\n            <template slot=\"prepend\"><div class=\"login-password\"></div></template>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-button type=\"primary\" :loading=\"showLoading\" @click.native.prevent=\"doLogin\">登录</el-button>\r\n      </div>\r\n    </el-form>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { getToken } from '@/api/auth'\r\nimport { getAuthorizedRouter } from '@/api/router'\r\nimport { mapGetters } from 'vuex'\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      displayLoading: false,\r\n      loginForm: {\r\n        username: '',\r\n        password: ''\r\n      },\r\n      rules: {\r\n        username: [{ required: true, message: '请输入用户名', trigger: 'blur' }],\r\n        password: [{ required: true, message: '请输入口令', trigger: 'blur' }]\r\n      }\r\n    };\r\n  },\r\n  computed: {\r\n    ...mapGetters(['showLoading'])\r\n  },\r\n  methods: {\r\n    doLogin() {\r\n      this.$refs['loginForm'].validate(valid => {\r\n        if (valid) {\r\n          this.$store.dispatch('setLoading', true)\r\n          getToken(this.loginForm.username, this.loginForm.password)\r\n            .then(response => {\r\n              sessionStorage.setItem('currentUser', JSON.stringify({\r\n                id: response.data.userId,\r\n                name: response.data.username\r\n              }))\r\n              sessionStorage.setItem('token', response.data.token)\r\n              sessionStorage.setItem('routers', JSON.stringify(response.data.routers))\r\n\r\n              // 初始化首页路由\r\n              this.initIndexRouter()\r\n\r\n              let redirect = decodeURIComponent(\r\n                this.$route.query.redirect || \"/\"\r\n              )\r\n              this.$router.push(redirect);\r\n              this.$store.dispatch('setLoading', false)\r\n            })\r\n            .catch(error => {\r\n              this.$store.dispatch('setLoading', false)\r\n              this.$message({\r\n                showClose: true,\r\n                message: error,\r\n                type: 'error'\r\n              })\r\n            })\r\n        }\r\n      })\r\n    },\r\n    initIndexRouter() {\r\n      let indexRouter = {\r\n        path: '/',\r\n        name: \"/\",\r\n        component: resolve => require(['@/views/home/index'], resolve),\r\n        children: [...this.generateChildRouters()]\r\n      }\r\n      this.$router.addRoutes([indexRouter])\r\n    },\r\n    generateChildRouters() {\r\n      if (!sessionStorage.routers) {\r\n        return []\r\n      }\r\n\r\n      let routers = JSON.parse(sessionStorage.routers)\r\n      let childRouters = []\r\n      for(let router of routers) {\r\n        if(router.code != null) {\r\n          let routerProps = JSON.parse(router.properties)\r\n          let childRouter = {\r\n            path: router.url,\r\n            name: router.code,\r\n            component: resolve => require(['@/views/' + router.code + '/index'], resolve),\r\n            meta: { routerId: router.id, requiresAuth: routerProps.meta.requiresAuth, nameFullPath: routerProps.nameFullPath }\r\n          }\r\n          childRouters.push(childRouter)      \r\n        }\r\n      }\r\n      return childRouters\r\n    }    \r\n  }\r\n}\r\n</script>\r\n\r\n<style rel=\"stylesheet/scss\" lang=\"scss\" scoped>\r\n.login-container {\r\n  .el-input {\r\n    width: 100%;\r\n  }\r\n  .el-button {\r\n    width: 100%;\r\n  }\r\n  .login-form {\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    width: 350px;\r\n    margin: 120px auto;\r\n    margin-bottom: 20px;\r\n    border: 1px solid #e0dedb;\r\n    border-radius: 4px;\r\n    -webkit-box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\r\n    box-shadow: 0 1px 1px rgba(0, 0, 0, 0.05);\r\n  }\r\n  .login-header {\r\n    padding: 10px 15px;\r\n    border-bottom: 1px solid #d0cdc7;\r\n    border-top-left-radius: 3px;\r\n    border-top-right-radius: 3px;\r\n    background-color: #f6f5f4;\r\n    .login-title {\r\n      font-size: 20px;\r\n    }\r\n  }\r\n  .login-body {\r\n    padding: 20px 20px;\r\n    text-align: center;\r\n    .profile-img {\r\n      width: 96px;\r\n      height: 96px;\r\n      margin: 0 auto 10px;\r\n      display: block;\r\n    }\r\n    .login-username {\r\n      width: 20px;\r\n      height: 20px;\r\n      margin: 0px -10px;\r\n      background-image: url(\"../../assets/images/user.png\");\r\n    }\r\n    .login-password {\r\n      width: 20px;\r\n      height: 20px;\r\n      margin: 0px -10px;\r\n      background-image: url(\"../../assets/images/lock.png\");\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/login/index.vue","import request from '@/utils/request'\r\nimport qs from 'qs'\r\n\r\nexport const getToken = (loginName, password) => \r\n    request({\r\n        url: '/auth/token',\r\n        method: 'post',\r\n        data: qs.stringify({\r\n            loginName,\r\n            password\r\n        })\r\n    })\n\n\n// WEBPACK FOOTER //\n// ./src/api/auth.js","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-container\"},[_c('el-form',{ref:\"loginForm\",staticClass:\"login-form\",attrs:{\"model\":_vm.loginForm,\"rules\":_vm.rules,\"autoComplete\":\"on\",\"label-position\":\"left\"}},[_c('div',{staticClass:\"login-header\"},[_c('strong',{staticClass:\"login-title\"},[_vm._v(\"系统登录\")])]),_vm._v(\" \"),_c('div',{staticClass:\"login-body\"},[_c('img',{staticClass:\"profile-img\",attrs:{\"src\":require(\"../../assets/images/people.png\"),\"alt\":\"\"}}),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"username\"}},[_c('el-input',{attrs:{\"name\":\"username\",\"size\":\"medium\",\"autoComplete\":\"on\",\"autofocus\":\"autofocus\",\"placeholder\":\"用户名\"},model:{value:(_vm.loginForm.username),callback:function ($$v) {_vm.$set(_vm.loginForm, \"username\", $$v)},expression:\"loginForm.username\"}},[_c('div',{staticClass:\"login-username\",attrs:{\"slot\":\"prepend\"},slot:\"prepend\"})])],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"prop\":\"password\"}},[_c('el-input',{attrs:{\"name\":\"password\",\"type\":\"password\",\"size\":\"medium\",\"placeholder\":\"口令\"},nativeOn:{\"keyup\":function($event){if(!('button' in $event)&&_vm._k($event.keyCode,\"enter\",13,$event.key)){ return null; }_vm.doLogin($event)}},model:{value:(_vm.loginForm.password),callback:function ($$v) {_vm.$set(_vm.loginForm, \"password\", $$v)},expression:\"loginForm.password\"}},[_c('template',{slot:\"prepend\"},[_c('div',{staticClass:\"login-password\"})])],2)],1),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"loading\":_vm.showLoading},nativeOn:{\"click\":function($event){$event.preventDefault();_vm.doLogin($event)}}},[_vm._v(\"登录\")])],1)])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler?{\"id\":\"data-v-2e9eedfd\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.1@vue-loader/lib/selector.js?type=template&index=0!./src/views/login/index.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2e9eedfd\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=styles&index=0!./index.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=script&index=0!./index.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2e9eedfd\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.1@vue-loader/lib/selector?type=template&index=0!./index.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2e9eedfd\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/login/index.vue\n// module id = null\n// module chunks = ","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAFKElEQVR4Xu2dj3EdNRDGVxUQOkgqwKkg7DVAUgGhAkIFJBWQVACpANPArVNBTAWECjAViPmCnufNww/f6fRpT7I047Fn3jvpbn/7R9Jp10FGc5VAcB19DC4DgLMSDAADgLMEnIcfFjAAOEvAefhhAQOAswSch2/CAuZ5fhZC+FpELkTkkYjg79N2LSI3InIlIp9E5IOq4veu2y4BmBmE/I2IPE8/uUIEgEsRebdXGLsCYGaPReRHEXmZK/H/uQ6W8UZV8Xs3bRcAksZD8K8qSAau6oe9gHAHYGZwMz8n315B/rdD/JJAIG64NTcASet/IrmbpQJFjHihqrAKl+YCIAnf0qzG5cFPBv1OVWER1Vt1AGaGqeSvIoKAu6fmAqEqgKT5fzj4+6Wgq0OoBmCHbucclKoQagKA28GMZ+8Ns6KntRZuVQCYGeb3mPG00q5V9WmNm6UDSKtb+P3WGlbNr9k3XQMAppt3bZ6xn21r/1VcERWAmUHwANBqe6+qjH2pW3mwAbSq/ccK84QZkGkA0oLrY6uqf3TfVCtgAngrIt93AOBGVb9kPQcTwF87XvGulSdtcUYB0EHwPQVEc0MsAJg/4wVLL+2Tqj5hPAwFwDzPVyGEZ4wbduyTMhuiADCznvz/gbkyXmOyAERHTWUNTdmaKA6gwwB8ADoAsFR7Yb+UmdCwgIXSjzF+mKap+KbiADAALJSA/9eaiQE49dDDJtwp8jYA4K7NbExDF1ps8RiAced5vgkhfLHwHlr5WjsLsR63IlSVoqyUTs2sq824GOPv0zQhthVvLACtvws+FTQSPChH5ykAOowDOKhFOUFNA2BmXbySjDH+OU0T7SAxE0Av6wFk00CZKI0GILmhpl/MxBj/DiE8VlVaFg0VQAdb05TV77EpUQG0bAU1tB/yoQPA4dwY43WDK2PkjiHHmNroANLeUGvH02nz/lOaVQAkCNAmZL/vumHVi7IIzMBbNQYcBkOKUowRs6Kv9kog+f0L5mFcNwtIVrBbCEn40HzKivec0lVzQXu2BC/hV5kF3UU+ZUwiMdo9JiSf/7K25h/kUt0CjoF4b1vjpEMI4XmtgHuXMroCSHHhIsb4tuZZ0uRyoPX0ef59Ew53AAkCdhuRzkTbdTwRxCtVfXefcGp87gog7RV961QxBZVSXqvq+xqC3s0s6EjjUSOo+EmzDGG6gqhuAWaGxA16AnQGCJQyw95/n+uA5G6g9bX8fAaDz5fALb3JvXjtdVUswMyQLUl7q7T2oRd8H1aAc0C0FzHV1gFmBq2nZpsvEGjOVyB8QKC6JJoFNFQf6D44tBRV2lZER8I/wKFBKG4BHQqfCqEogI6FT4NQGkCrAfe+OHD4vHhgLgbAzDDTAYDeG1bOOKpYZIpaBEAqS4asGFQ9fwjtUlVflHjQUgAgfMrx7RIPSeqjyJHFzQAekOs55QgXhPoRm1zRJgANVMIlKf9tt5vPD20F0FUmTCatTVVUsgE8wMB7js8VNowy4eWfDfV+oZ77wKTrsq1giwWgGu7e9/ZJ8v5Pt9mxIAtA+rcjKMY92r8SyK6smAugiYO2lbUja8c0F0CPpQi28vpNVVeX518NoIO0o62CPnd9lhvKATDm/ucRrs4nXg2gxzoQBU1i9f7QagCdlqIpxWB1HBgASoleRHLqyuUA6KIEQUG5H3e1OrMyBwDSjC5rHicnCatYt6gnEULAibrV/41vNYBidz06+iyBAcBZEQaAAcBZAs7DDwsYAJwl4Dz8Pyy/8XDnwdOrAAAAAElFTkSuQmCC\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/assets/images/people.png\n// module id = ZyW+\n// module chunks = 3","import axios from 'axios'\r\n\r\n// 创建axios实例\r\nconst service = axios.create({\r\n    // api的base_url\r\n    baseURL: process.env.BASE_API,\r\n    // 请求超时时间\r\n    timeout: 5000\r\n})\r\n\r\n// request拦截器\r\nservice.interceptors.request.use(config => {\r\n    // Do something before request is sent\r\n    if (sessionStorage.getItem('token')) {\r\n        // 让每个请求携带token--['X-Token']为自定义key 请根据实际情况自行修改\r\n        config.headers['X-Token'] = sessionStorage.getItem('token')\r\n    }\r\n    return config\r\n}, error => {\r\n    // Do something with request error\r\n    console.log(error) // for debug\r\n    Promise.reject(error)\r\n})\r\n\r\n// respone拦截器\r\nservice.interceptors.response.use(\r\n    response => {\r\n        if (response.data.errCode == 2) {\r\n            router.push({\r\n                path: \"/login\",\r\n                // 从哪个页面跳转\r\n                querry: { redirect: router.currentRoute.fullPath }\r\n            })\r\n        }\r\n        return response;\r\n    },\r\n    error => {\r\n        return Promise.reject(error)\r\n    })\r\n\r\nexport default service\n\n\n// WEBPACK FOOTER //\n// ./src/utils/request.js"],"sourceRoot":""}